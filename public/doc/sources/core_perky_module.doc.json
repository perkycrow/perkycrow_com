[
  {
    "type": "code",
    "title": "Direct instantiation",
    "source": "const module = new PerkyModule({\n    $id: 'myModule',\n    $category: 'custom',\n    $tags: ['active', 'visible']\n})"
  },
  {
    "type": "code",
    "title": "Subclassing",
    "source": "class Player extends PerkyModule {\n    static $category = 'entity'\n    static $tags = ['controllable']\n\n    onStart () {\n        // Called when module starts\n    }\n}"
  },
  {
    "type": "action",
    "title": "Instance properties",
    "source": "const module = new PerkyModule({\n    $id: 'player',\n    $category: 'entity'\n})\nlogger.log('$id:', module.$id)\nlogger.log('$name:', module.$name)\nlogger.log('$category:', module.$category)\nlogger.log('$status:', module.$status)"
  },
  {
    "type": "action",
    "title": "start / stop",
    "source": "const module = new PerkyModule({$id: 'test'})\nlogger.log('initial status:', module.$status)\n\nmodule.start()\nlogger.log('after start:', module.$status, 'running:', module.running)\n\nmodule.stop()\nlogger.log('after stop:', module.$status, 'running:', module.running)"
  },
  {
    "type": "action",
    "title": "dispose",
    "source": "const module = new PerkyModule({$id: 'test'})\nmodule.start()\nlogger.log('before dispose:', module.$status)\n\nmodule.dispose()\nlogger.log('after dispose:', module.$status, 'disposed:', module.disposed)"
  },
  {
    "type": "action",
    "title": "Lifecycle events",
    "source": "const module = new PerkyModule({$id: 'test'})\nmodule.on('start', () => logger.log('event: start'))\nmodule.on('stop', () => logger.log('event: stop'))\nmodule.on('dispose', () => logger.log('event: dispose'))\n\nmodule.start()\nmodule.stop()\nmodule.dispose()"
  },
  {
    "type": "action",
    "title": "create",
    "source": "const parent = new PerkyModule({$id: 'parent'})\n\nconst child = parent.create(PerkyModule, {\n    $id: 'child',\n    $category: 'component'\n})\n\nlogger.log('children count:', parent.children.length)\nlogger.log('child.$id:', child.$id)\nlogger.log('child.host:', child.host.$id)"
  },
  {
    "type": "action",
    "title": "getChild / hasChild",
    "source": "const parent = new PerkyModule({$id: 'parent'})\nparent.create(PerkyModule, {$id: 'player'})\nparent.create(PerkyModule, {$id: 'enemy'})\n\nlogger.log('hasChild player:', parent.hasChild('player'))\nlogger.log('hasChild boss:', parent.hasChild('boss'))\nlogger.log('getChild:', parent.getChild('player').$id)"
  },
  {
    "type": "action",
    "title": "Lifecycle propagation",
    "source": "const parent = new PerkyModule({$id: 'parent'})\nconst child = parent.create(PerkyModule, {$id: 'child'})\n\nchild.on('start', () => logger.log('child started'))\nchild.on('stop', () => logger.log('child stopped'))\n\nlogger.log('Starting parent...')\nparent.start()\n\nlogger.log('Stopping parent...')\nparent.stop()"
  },
  {
    "type": "action",
    "title": "childrenByCategory",
    "source": "const game = new PerkyModule({$id: 'game'})\ngame.create(PerkyModule, {$id: 'player', $category: 'entity'})\ngame.create(PerkyModule, {$id: 'enemy1', $category: 'entity'})\ngame.create(PerkyModule, {$id: 'score', $category: 'ui'})\n\nconst entities = game.childrenByCategory('entity')\nlogger.log('entities:', entities.map(e => e.$id))"
  },
  {
    "type": "action",
    "title": "Basic tags",
    "source": "const module = new PerkyModule({\n    $id: 'player',\n    $tags: ['controllable', 'visible']\n})\n\nlogger.log('$tags:', module.$tags)\nlogger.log('hasTag visible:', module.hasTag('visible'))\nlogger.log('hasTags:', module.hasTags(['controllable', 'visible']))"
  },
  {
    "type": "action",
    "title": "addTag / removeTag",
    "source": "const module = new PerkyModule({$id: 'enemy'})\n\nmodule.addTag('hostile')\nmodule.addTag('visible')\nlogger.log('after adding:', module.$tags)\n\nmodule.removeTag('hostile')\nlogger.log('after removing:', module.$tags)"
  },
  {
    "type": "action",
    "title": "childrenByTags",
    "source": "const game = new PerkyModule({$id: 'game'})\ngame.create(PerkyModule, {$id: 'player', $tags: ['entity', 'controllable']})\ngame.create(PerkyModule, {$id: 'enemy', $tags: ['entity', 'hostile']})\ngame.create(PerkyModule, {$id: 'rock', $tags: ['entity']})\n\nlogger.log('entities:', game.childrenByTags('entity').map(c => c.$id))\nlogger.log('hostile:', game.childrenByTags(['entity', 'hostile']).map(c => c.$id))"
  },
  {
    "type": "action",
    "title": "query / queryAll",
    "source": "const app = new PerkyModule({$id: 'app'})\nconst game = app.create(PerkyModule, {$id: 'game', $category: 'scene'})\ngame.create(PerkyModule, {$id: 'player', $category: 'entity', $tags: ['controllable']})\ngame.create(PerkyModule, {$id: 'enemy', $category: 'entity', $tags: ['hostile']})\n\nlogger.log('query #player:', app.query('#player')?.$id)\nlogger.log('queryAll entity:', app.queryAll('entity').map(e => e.$id))\nlogger.log('queryAll .hostile:', app.queryAll('.hostile').map(e => e.$id))"
  },
  {
    "type": "action",
    "title": "on / emit",
    "source": "const module = new PerkyModule({$id: 'test'})\n\nmodule.on('damage', amount => {\n    logger.log('received damage:', amount)\n})\n\nmodule.emit('damage', 25)\nmodule.emit('damage', 50)"
  },
  {
    "type": "action",
    "title": "listenTo",
    "source": "const player = new PerkyModule({$id: 'player'})\nconst enemy = new PerkyModule({$id: 'enemy'})\n\nplayer.listenTo(enemy, 'attack', damage => {\n    logger.log('player received attack:', damage)\n})\n\nenemy.emit('attack', 30)"
  }
]