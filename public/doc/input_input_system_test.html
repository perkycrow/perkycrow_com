<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InputSystem - Perky Docs</title>
    <meta name="description" content="Documentation for InputSystem in the Perky game framework">
    <meta property="og:title" content="InputSystem - Perky Docs">
    <meta property="og:description" content="Documentation for InputSystem in the Perky game framework">
    <link rel="stylesheet" href="assets/main-DKVNPEnN.css">
</head>
<body>
    <noscript>
        <style>
            .seo-content { max-width: 800px; padding: 2rem; margin: 0 auto; }
            .seo-content h1 { margin-bottom: 1rem; }
            .seo-content h2 { margin-top: 2rem; margin-bottom: 1rem; border-bottom: 1px solid #333; padding-bottom: 0.5rem; }
            .seo-content h3 { margin-top: 1.5rem; margin-bottom: 0.5rem; }
            .seo-content pre { background: #1a1a2e; padding: 1rem; border-radius: 6px; overflow-x: auto; }
            .seo-content code { font-family: monospace; }
            .seo-content .doc-text { margin-bottom: 1rem; line-height: 1.6; }
            .seo-content .doc-block { margin-bottom: 1.5rem; }
            .seo-content .api-extends { margin-bottom: 1rem; }
            .seo-content .api-member { margin-bottom: 1rem; }
        </style>
        <div class="seo-content">
            <h1>InputSystem</h1>
            <section class="test-section"><h2>InputSystem</h2>
        <div class="test-hook">
            <h4>beforeEach</h4>
            <pre><code>mockHost = new PerkyModule({name: 'mockHost'})
mockHost.actionDispatcher = {
    dispatchAction: vi.fn()
}

inputSystem = new InputSystem()
inputSystem.install(mockHost)</code></pre>
        </div>
    
            <div class="test-case">
                <h4>constructor creates InputBinder</h4>
                <pre><code>expect(inputSystem.inputBinder).toBeInstanceOf(InputBinder)</code></pre>
            </div>
        
            <div class="test-case">
                <h4>onInstall creates keyboard and mouse devices</h4>
                <pre><code>expect(inputSystem.getDevice('keyboard')).toBeInstanceOf(KeyboardDevice)
expect(inputSystem.getDevice('mouse')).toBeInstanceOf(MouseDevice)</code></pre>
            </div>
        
            <div class="test-case">
                <h4>onInstall registers devices with $bind</h4>
                <pre><code>expect(inputSystem.getDevice('keyboard')).toBe(inputSystem.keyboard)
expect(inputSystem.getDevice('mouse')).toBe(inputSystem.mouse)</code></pre>
            </div>
        
            <div class="test-case">
                <h4>onInstall delegates device management methods to host</h4>
                <pre><code>expect(typeof mockHost.registerDevice).toBe('function')
expect(typeof mockHost.getDevice).toBe('function')
expect(typeof mockHost.isPressed).toBe('function')
expect(typeof mockHost.getControl).toBe('function')</code></pre>
            </div>
        
            <div class="test-case">
                <h4>onInstall delegates InputBinder methods to host</h4>
                <pre><code>expect(typeof mockHost.bindInput).toBe('function')
expect(typeof mockHost.unbind).toBe('function')
expect(typeof mockHost.getBinding).toBe('function')
expect(typeof mockHost.hasBinding).toBe('function')</code></pre>
            </div>
        
            <div class="test-case">
                <h4>onInstall adds convenience methods to host</h4>
                <pre><code>expect(typeof mockHost.isKeyPressed).toBe('function')
expect(typeof mockHost.isMousePressed).toBe('function')
expect(typeof mockHost.isActionPressed).toBe('function')
expect(typeof mockHost.getActionControls).toBe('function')</code></pre>
            </div>
        
            <div class="test-case">
                <h4>registerDevice</h4>
                <pre><code>const device = inputSystem.registerDevice(InputDevice, {$id: 'gamepad', $bind: 'gamepad'})

expect(inputSystem.getDevice('gamepad')).toBe(device)
expect(device.host).toBe(inputSystem)
expect(inputSystem.gamepad).toBe(device)</code></pre>
            </div>
        
            <div class="test-case">
                <h4>registerDevice with duplicate name replaces device</h4>
                <pre><code>inputSystem.registerDevice(InputDevice, {$id: 'test', $bind: 'test'})
const device2 = inputSystem.registerDevice(InputDevice, {$id: 'test', $bind: 'test'})

expect(inputSystem.getDevice('test')).toBe(device2)
expect(inputSystem.test).toBe(device2)</code></pre>
            </div>
        
            <div class="test-case">
                <h4>isPressed</h4>
                <pre><code>const button = inputSystem.keyboard.findOrCreateControl(ButtonControl, {name: 'TestButton'})

expect(inputSystem.isPressed('keyboard', 'TestButton')).toBe(false)
expect(inputSystem.isPressed('nonExistent', 'TestButton')).toBe(false)
expect(inputSystem.isPressed('keyboard', 'nonExistent')).toBe(false)

button.press()
expect(inputSystem.isPressed('keyboard', 'TestButton')).toBe(true)

button.release()
expect(inputSystem.isPressed('keyboard', 'TestButton')).toBe(false)</code></pre>
            </div>
        
            <div class="test-case">
                <h4>getValueFor</h4>
                <pre><code>const button = inputSystem.mouse.findOrCreateControl(ButtonControl, {name: 'TestButton'})
button.value = 0.5

expect(inputSystem.getValueFor('mouse', 'TestButton')).toBe(0.5)
expect(inputSystem.getValueFor('nonExistent', 'TestButton')).toBeUndefined()
expect(inputSystem.getValueFor('mouse', 'nonExistent')).toBeUndefined()</code></pre>
            </div>
        
            <div class="test-case">
                <h4>getControl</h4>
                <pre><code>const device = inputSystem.registerDevice(InputDevice, {$id: 'gamepad', $bind: 'gamepad'})
const button = device.findOrCreateControl(ButtonControl, {name: 'TestButton'})

expect(inputSystem.getControl('gamepad', 'TestButton')).toBe(button)
expect(inputSystem.getControl('nonExistent', 'TestButton')).toBeNull()
expect(inputSystem.getControl('gamepad', 'nonExistent')).toBeNull()</code></pre>
            </div>
        
            <div class="test-case">
                <h4>automatic lifecycle management</h4>
                <pre><code>inputSystem.start()
const device = inputSystem.registerDevice(InputDevice, {$id: 'auto', $bind: 'auto'})

expect(device.started).toBe(true)</code></pre>
            </div>
        
            <div class="test-case">
                <h4>event forwarding</h4>
                <pre><code>const device = inputSystem.registerDevice(InputDevice, {$id: 'test', $bind: 'test'})

const pressedListener = vi.fn()
const releasedListener = vi.fn()
const updatedListener = vi.fn()

inputSystem.on('control:pressed', pressedListener)
inputSystem.on('control:released', releasedListener)
inputSystem.on('control:updated', updatedListener)

const button = device.findOrCreateControl(ButtonControl, {name: 'TestButton'})

button.press()
expect(pressedListener).toHaveBeenCalledWith(button, null, device)

button.release()
expect(releasedListener).toHaveBeenCalledWith(button, null, device)

button.setValue(0.5)
expect(updatedListener).toHaveBeenCalled()</code></pre>
            </div>
        
            <div class="test-case">
                <h4>isPressedAny</h4>
                <pre><code>const gamepad = inputSystem.registerDevice(InputDevice, {$id: 'gamepad', $bind: 'gamepad'})

const keyW = inputSystem.keyboard.findOrCreateControl(ButtonControl, {name: 'KeyW'})
const buttonA = gamepad.findOrCreateControl(ButtonControl, {name: 'ButtonA'})

expect(inputSystem.isPressedAny('KeyW')).toBe(false)
expect(inputSystem.isPressedAny('ButtonA')).toBe(false)
expect(inputSystem.isPressedAny('NonExistent')).toBe(false)

keyW.press()
expect(inputSystem.isPressedAny('KeyW')).toBe(true)
expect(inputSystem.isPressedAny('ButtonA')).toBe(false)

buttonA.press()
expect(inputSystem.isPressedAny('ButtonA')).toBe(true)</code></pre>
            </div>
        
            <div class="test-case">
                <h4>getValueAny</h4>
                <pre><code>const keyW = inputSystem.keyboard.findOrCreateControl(ButtonControl, {name: 'KeyW'})
const leftButton = inputSystem.mouse.findOrCreateControl(ButtonControl, {name: 'leftButton'})

keyW.setValue(0.8)
leftButton.setValue(0.5)

expect(inputSystem.getValueAny('KeyW')).toBe(0.8)
expect(inputSystem.getValueAny('leftButton')).toBe(0.5)
expect(inputSystem.getValueAny('NonExistent')).toBeUndefined()</code></pre>
            </div>
        
            <div class="test-case">
                <h4>getControlAny</h4>
                <pre><code>const keyW = inputSystem.keyboard.findOrCreateControl(ButtonControl, {name: 'KeyW'})
const leftButton = inputSystem.mouse.findOrCreateControl(ButtonControl, {name: 'leftButton'})

expect(inputSystem.getControlAny('KeyW')).toBe(keyW)
expect(inputSystem.getControlAny('leftButton')).toBe(leftButton)
expect(inputSystem.getControlAny('NonExistent')).toBeNull()</code></pre>
            </div>
        
            <div class="test-case">
                <h4>getAllPressed</h4>
                <pre><code>const gamepad = inputSystem.registerDevice(InputDevice, {$id: 'gamepad', $bind: 'gamepad'})

const keyEnter = inputSystem.keyboard.findOrCreateControl(ButtonControl, {name: 'Enter'})
const gamepadEnter = gamepad.findOrCreateControl(ButtonControl, {name: 'Enter'})

expect(inputSystem.getAllPressed('Enter')).toEqual([])

keyEnter.press()
expect(inputSystem.getAllPressed('Enter')).toEqual([inputSystem.keyboard])

gamepadEnter.press()
expect(inputSystem.getAllPressed('Enter')).toEqual([inputSystem.keyboard, gamepad])

keyEnter.release()
expect(inputSystem.getAllPressed('Enter')).toEqual([gamepad])</code></pre>
            </div>
        
            <div class="test-case">
                <h4>getAllValues</h4>
                <pre><code>const device1 = inputSystem.registerDevice(InputDevice, {$id: 'device1', $bind: 'device1'})
const device2 = inputSystem.registerDevice(InputDevice, {$id: 'device2', $bind: 'device2'})

const control1 = device1.findOrCreateControl(ButtonControl, {name: 'SharedControl'})
const control2 = device2.findOrCreateControl(ButtonControl, {name: 'SharedControl'})

control1.setValue(0.3)
control2.setValue(0.7)

const values = inputSystem.getAllValues('SharedControl')
expect(values).toHaveLength(2)
expect(values[0]).toEqual({device: device1, value: 0.3})
expect(values[1]).toEqual({device: device2, value: 0.7})</code></pre>
            </div>
        
            <div class="test-case">
                <h4>addControl - explicit form</h4>
                <pre><code>const control = inputSystem.addControl('keyboard', ButtonControl, {
    name: 'TestKey',
    pressThreshold: 0.8
})

expect(control).toBeInstanceOf(ButtonControl)
expect(control.name).toBe('TestKey')
expect(control.pressThreshold).toBe(0.8)
expect(inputSystem.keyboard.getControl('TestKey')).toBe(control)</code></pre>
            </div>
        
            <div class="test-case">
                <h4>addControl - shortcut form</h4>
                <pre><code>const control = inputSystem.addControl(ButtonControl, {
    name: 'ShortcutKey',
    pressThreshold: 0.6
})

expect(control).toBeInstanceOf(ButtonControl)
expect(control.name).toBe('ShortcutKey')
expect(control.pressThreshold).toBe(0.6)

expect(inputSystem.keyboard.getControl('ShortcutKey')).toBe(control)
expect(inputSystem.mouse.getControl('ShortcutKey')).toBeUndefined()</code></pre>
            </div>
        
            <div class="test-case">
                <h4>addControl with nonexistent device</h4>
                <pre><code>expect(() =&gt; {
    inputSystem.addControl('nonexistent', ButtonControl, {name: 'test'})
}).toThrow(&quot;Device 'nonexistent' not found&quot;)</code></pre>
            </div>
        
            <div class="test-case">
                <h4>addControlToFirst</h4>
                <pre><code>const control = inputSystem.addControlToFirst(ButtonControl, {
    name: 'FirstDeviceControl'
})

expect(control).toBeInstanceOf(ButtonControl)
expect(control.name).toBe('FirstDeviceControl')

expect(inputSystem.keyboard.getControl('FirstDeviceControl')).toBe(control)
expect(inputSystem.mouse.getControl('FirstDeviceControl')).toBeUndefined()</code></pre>
            </div>
        
            <div class="test-case">
                <h4>addControlToAll</h4>
                <pre><code>const results = inputSystem.addControlToAll(ButtonControl, {
    name: 'SharedControl'
})

expect(results).toHaveLength(3)
expect(results[0].device).toBe(inputSystem.keyboard)
expect(results[0].control).toBeInstanceOf(ButtonControl)
expect(results[0].control.name).toBe('SharedControl')
expect(results[1].device).toBe(inputSystem.mouse)
expect(results[1].control).toBeInstanceOf(ButtonControl)
expect(results[1].control.name).toBe('SharedControl')
expect(results[2].device).toBe(inputSystem.touch)
expect(results[2].control).toBeInstanceOf(ButtonControl)
expect(results[2].control.name).toBe('SharedControl')

expect(inputSystem.keyboard.getControl('SharedControl')).toBe(results[0].control)
expect(inputSystem.mouse.getControl('SharedControl')).toBe(results[1].control)
expect(inputSystem.touch.getControl('SharedControl')).toBe(results[2].control)</code></pre>
            </div>
        
            <div class="test-case">
                <h4>deviceKeyFor</h4>
                <pre><code>expect(inputSystem.deviceKeyFor(inputSystem.keyboard)).toBe('keyboard')
expect(inputSystem.deviceKeyFor(inputSystem.mouse)).toBe('mouse')

const unknownDevice = new InputDevice({name: 'Unknown'})
expect(inputSystem.deviceKeyFor(unknownDevice)).toBeUndefined()</code></pre>
            </div>
        
            <div class="test-case">
                <h4>bindInput creates keyboard binding (auto-detected)</h4>
                <pre><code>const binding = inputSystem.bindInput({controlName: 'Space', actionName: 'jump'})

expect(binding).toBeDefined()
expect(binding.deviceName).toBe('keyboard')
expect(binding.controlName).toBe('Space')
expect(binding.actionName).toBe('jump')</code></pre>
            </div>
        
            <div class="test-case">
                <h4>bindInput creates mouse binding (auto-detected)</h4>
                <pre><code>const binding = inputSystem.bindInput({controlName: 'leftButton', actionName: 'fire'})

expect(binding).toBeDefined()
expect(binding.deviceName).toBe('mouse')
expect(binding.controlName).toBe('leftButton')
expect(binding.actionName).toBe('fire')</code></pre>
            </div>
        
            <div class="test-case">
                <h4>isKeyPressed returns correct state</h4>
                <pre><code>const spaceControl = inputSystem.keyboard.findOrCreateControl(ButtonControl, {name: 'Space'})

expect(inputSystem.isKeyPressed('Space')).toBe(false)

spaceControl.press()
expect(inputSystem.isKeyPressed('Space')).toBe(true)

spaceControl.release()
expect(inputSystem.isKeyPressed('Space')).toBe(false)</code></pre>
            </div>
        
            <div class="test-case">
                <h4>isMousePressed returns correct state</h4>
                <pre><code>const leftButtonControl = inputSystem.mouse.findOrCreateControl(ButtonControl, {name: 'leftButton'})

expect(inputSystem.isMousePressed('leftButton')).toBe(false)

leftButtonControl.press()
expect(inputSystem.isMousePressed('leftButton')).toBe(true)

leftButtonControl.release()
expect(inputSystem.isMousePressed('leftButton')).toBe(false)</code></pre>
            </div>
        
            <div class="test-case">
                <h4>isTouchPressed returns correct state</h4>
                <pre><code>const swipeUpControl = inputSystem.touch.getControl('swipeUp')

expect(inputSystem.isTouchPressed('swipeUp')).toBe(false)

swipeUpControl.press()
expect(inputSystem.isTouchPressed('swipeUp')).toBe(true)

swipeUpControl.release()
expect(inputSystem.isTouchPressed('swipeUp')).toBe(false)</code></pre>
            </div>
        
            <div class="test-case">
                <h4>getTouchValue returns touch control value</h4>
                <pre><code>const positionControl = inputSystem.touch.getControl('position')

positionControl.setValue({x: 150, y: 250})
const value = inputSystem.getTouchValue('position')
expect(value.x).toBe(150)
expect(value.y).toBe(250)</code></pre>
            </div>
        
            <div class="test-case">
                <h4>isActionPressed returns false when action not bound</h4>
                <pre><code>expect(inputSystem.isActionPressed('jump')).toBe(false)</code></pre>
            </div>
        
            <div class="test-case">
                <h4>isActionPressed returns true when action is pressed</h4>
                <pre><code>inputSystem.bindInput({controlName: 'Space', actionName: 'jump'})

const spaceControl = inputSystem.keyboard.findOrCreateControl(ButtonControl, {name: 'Space'})
spaceControl.press()

expect(inputSystem.isActionPressed('jump')).toBe(true)</code></pre>
            </div>
        
            <div class="test-case">
                <h4>isActionPressed works with multiple bindings</h4>
                <pre><code>inputSystem.bindInput({controlName: 'Space', actionName: 'jump', controllerName: 'player1'})
inputSystem.bindInput({controlName: 'KeyW', actionName: 'jump', controllerName: 'player2'})

const wControl = inputSystem.keyboard.findOrCreateControl(ButtonControl, {name: 'KeyW'})
wControl.press()

expect(inputSystem.isActionPressed('jump')).toBe(true)
expect(inputSystem.isActionPressed('jump', 'player2')).toBe(true)
expect(inputSystem.isActionPressed('jump', 'player1')).toBe(false)</code></pre>
            </div>
        
            <div class="test-case">
                <h4>getActionControls returns empty array when action not bound</h4>
                <pre><code>const controls = inputSystem.getActionControls('jump')
expect(controls).toEqual([])</code></pre>
            </div>
        
            <div class="test-case">
                <h4>getActionControls returns controls for action</h4>
                <pre><code>inputSystem.bindInput({controlName: 'Space', actionName: 'jump'})

const spaceControl = inputSystem.keyboard.findOrCreateControl(ButtonControl, {name: 'Space'})

const controls = inputSystem.getActionControls('jump')
expect(controls).toHaveLength(1)
expect(controls[0]).toBe(spaceControl)</code></pre>
            </div>
        
            <div class="test-case">
                <h4>emits input:triggered event when control is pressed</h4>
                <pre><code>inputSystem.bindInput({controlName: 'Space', actionName: 'jump'})

const triggeredListener = vi.fn()
mockHost.on('input:triggered', triggeredListener)

const spaceControl = inputSystem.keyboard.findOrCreateControl(ButtonControl, {name: 'Space'})

spaceControl.press({code: 'Space'})

await new Promise(resolve =&gt; setTimeout(resolve, 0))

expect(triggeredListener).toHaveBeenCalled()
expect(triggeredListener).toHaveBeenCalledWith(
    expect.objectContaining({actionName: 'jump'}),
    expect.anything(),
    expect.anything()
)</code></pre>
            </div>
        
            <div class="test-case">
                <h4>emits control events</h4>
                <pre><code>const pressedListener = vi.fn()
const releasedListener = vi.fn()

inputSystem.on('control:pressed', pressedListener)
inputSystem.on('control:released', releasedListener)

const spaceControl = inputSystem.keyboard.findOrCreateControl(ButtonControl, {name: 'Space'})

spaceControl.press({code: 'Space'})
await new Promise(resolve =&gt; setTimeout(resolve, 0))
expect(pressedListener).toHaveBeenCalled()

spaceControl.release({code: 'Space'})
await new Promise(resolve =&gt; setTimeout(resolve, 0))
expect(releasedListener).toHaveBeenCalled()</code></pre>
            </div>
        
            <div class="test-case">
                <h4>getInputValue returns control value</h4>
                <pre><code>const spaceControl = inputSystem.keyboard.findOrCreateControl(ButtonControl, {name: 'Space'})
spaceControl.press()

expect(inputSystem.getInputValue('keyboard', 'Space')).toBe(1)</code></pre>
            </div>
        
            <div class="test-case">
                <h4>getKeyValue returns keyboard control value</h4>
                <pre><code>const spaceControl = inputSystem.keyboard.findOrCreateControl(ButtonControl, {name: 'Space'})
spaceControl.press()

expect(inputSystem.getKeyValue('Space')).toBe(1)</code></pre>
            </div>
        
            <div class="test-case">
                <h4>getMouseValue returns mouse control value</h4>
                <pre><code>const leftButtonControl = inputSystem.mouse.findOrCreateControl(ButtonControl, {name: 'leftButton'})
leftButtonControl.press()

expect(inputSystem.getMouseValue('leftButton')).toBe(1)</code></pre>
            </div>
        
            <div class="test-case">
                <h4>constructor accepts inputBinder data</h4>
                <pre><code>const bindings = [
    {
        deviceName: 'keyboard',
        controlName: 'Space',
        actionName: 'jump'
    }
]

const customInputSystem = new InputSystem({
    bindings
})

expect(customInputSystem.inputBinder.hasBinding({actionName: 'jump'})).toBe(true)</code></pre>
            </div>
        
            <div class="test-case">
                <h4>listDeviceNames returns array of device names</h4>
                <pre><code>const names = inputSystem.listDeviceNames()

expect(names).toContain('keyboard')
expect(names).toContain('mouse')
expect(names).toContain('touch')</code></pre>
            </div>
        
            <div class="test-case">
                <h4>getPressedControls returns pressed controls for device</h4>
                <pre><code>const button1 = inputSystem.keyboard.findOrCreateControl(ButtonControl, {name: 'KeyA'})
const button2 = inputSystem.keyboard.findOrCreateControl(ButtonControl, {name: 'KeyB'})

expect(inputSystem.getPressedControls('keyboard')).toEqual([])

button1.press()
expect(inputSystem.getPressedControls('keyboard')).toEqual([button1])

button2.press()
const pressed = inputSystem.getPressedControls('keyboard')
expect(pressed).toHaveLength(2)
expect(pressed).toContain(button1)
expect(pressed).toContain(button2)</code></pre>
            </div>
        
            <div class="test-case">
                <h4>getPressedControls returns empty array for nonexistent device</h4>
                <pre><code>expect(inputSystem.getPressedControls('nonexistent')).toEqual([])</code></pre>
            </div>
        
            <div class="test-case">
                <h4>getInputValueAny returns value from any device</h4>
                <pre><code>const keyControl = inputSystem.keyboard.findOrCreateControl(ButtonControl, {name: 'TestKey'})
keyControl.setValue(0.75)

expect(inputSystem.getInputValueAny('TestKey')).toBe(0.75)
expect(inputSystem.getInputValueAny('NonExistent')).toBeUndefined()</code></pre>
            </div>
        <section class="test-section-nested"><h3>getDirection</h3>
        <div class="test-hook">
            <h4>beforeEach</h4>
            <pre><code>// Setup WASD bindings
inputSystem.bindInput({controlName: 'KeyW', actionName: 'moveUp'})
inputSystem.bindInput({controlName: 'KeyA', actionName: 'moveLeft'})
inputSystem.bindInput({controlName: 'KeyS', actionName: 'moveDown'})
inputSystem.bindInput({controlName: 'KeyD', actionName: 'moveRight'})</code></pre>
        </div>
    
            <div class="test-case">
                <h4>returns zero vector when no keys pressed</h4>
                <pre><code>const dir = inputSystem.getDirection()

expect(dir.x).toBe(0)
expect(dir.y).toBe(0)</code></pre>
            </div>
        
            <div class="test-case">
                <h4>returns up vector when W pressed</h4>
                <pre><code>const wControl = inputSystem.keyboard.findOrCreateControl(ButtonControl, {name: 'KeyW'})
wControl.press()

const dir = inputSystem.getDirection()

expect(dir.x).toBe(0)
expect(dir.y).toBe(1)</code></pre>
            </div>
        
            <div class="test-case">
                <h4>returns normalized diagonal when W+D pressed</h4>
                <pre><code>const wControl = inputSystem.keyboard.findOrCreateControl(ButtonControl, {name: 'KeyW'})
const dControl = inputSystem.keyboard.findOrCreateControl(ButtonControl, {name: 'KeyD'})
wControl.press()
dControl.press()

const dir = inputSystem.getDirection()

// Diagonal should be normalized (â‰ˆ0.707, 0.707)
expect(dir.x).toBeCloseTo(Math.SQRT1_2, 5)
expect(dir.y).toBeCloseTo(Math.SQRT1_2, 5)
expect(dir.length()).toBeCloseTo(1, 5)</code></pre>
            </div>
        
            <div class="test-case">
                <h4>returns left vector when A pressed</h4>
                <pre><code>const aControl = inputSystem.keyboard.findOrCreateControl(ButtonControl, {name: 'KeyA'})
aControl.press()

const dir = inputSystem.getDirection()

expect(dir.x).toBe(-1)
expect(dir.y).toBe(0)</code></pre>
            </div>
        
            <div class="test-case">
                <h4>cancels opposite directions</h4>
                <pre><code>const wControl = inputSystem.keyboard.findOrCreateControl(ButtonControl, {name: 'KeyW'})
const sControl = inputSystem.keyboard.findOrCreateControl(ButtonControl, {name: 'KeyS'})
wControl.press()
sControl.press()

const dir = inputSystem.getDirection()

expect(dir.x).toBe(0)
expect(dir.y).toBe(0)</code></pre>
            </div>
        
            <div class="test-case">
                <h4>works with custom direction name</h4>
                <pre><code>inputSystem.bindInput({controlName: 'ArrowUp', actionName: 'aimUp'})
inputSystem.bindInput({controlName: 'ArrowDown', actionName: 'aimDown'})
inputSystem.bindInput({controlName: 'ArrowLeft', actionName: 'aimLeft'})
inputSystem.bindInput({controlName: 'ArrowRight', actionName: 'aimRight'})

const upControl = inputSystem.keyboard.findOrCreateControl(ButtonControl, {name: 'ArrowUp'})
upControl.press()

const dir = inputSystem.getDirection('aim')

expect(dir.x).toBe(0)
expect(dir.y).toBe(1)</code></pre>
            </div>
        
            <div class="test-case">
                <h4>returns correct vector for all 8 directions</h4>
                <pre><code>const testDirections = [
    {keys: ['KeyW'], expected: {x: 0, y: 1}},
    {keys: ['KeyD'], expected: {x: 1, y: 0}},
    {keys: ['KeyS'], expected: {x: 0, y: -1}},
    {keys: ['KeyA'], expected: {x: -1, y: 0}},
    {keys: ['KeyW', 'KeyD'], expected: {x: Math.SQRT1_2, y: Math.SQRT1_2}},
    {keys: ['KeyS', 'KeyD'], expected: {x: Math.SQRT1_2, y: -Math.SQRT1_2}},
    {keys: ['KeyS', 'KeyA'], expected: {x: -Math.SQRT1_2, y: -Math.SQRT1_2}},
    {keys: ['KeyW', 'KeyA'], expected: {x: -Math.SQRT1_2, y: Math.SQRT1_2}}
]

testDirections.forEach(({keys, expected}) =&gt; {
    ['KeyW', 'KeyA', 'KeyS', 'KeyD'].forEach(key =&gt; {
        const control = inputSystem.keyboard.getControl(key)
        if (control) {
            control.release()
        }
    })

    keys.forEach(key =&gt; {
        const control = inputSystem.keyboard.findOrCreateControl(ButtonControl, {name: key})
        control.press()
    })

    const dir = inputSystem.getDirection()
    expect(dir.x).toBeCloseTo(expected.x, 5)
    expect(dir.y).toBeCloseTo(expected.y, 5)
})</code></pre>
            </div>
        </section></section>
        </div>
    </noscript>
    <button class="mobile-toggle" id="mobile-toggle" aria-label="Toggle menu">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 12h18M3 6h18M3 18h18"></path>
        </svg>
    </button>
    <div class="mobile-overlay" id="mobile-overlay"></div>
    <div class="docs-layout">
        <aside class="docs-sidebar" id="docs-sidebar">
            <div class="sidebar-header">
                <h1>perky docs</h1>
                <div class="sidebar-search">
                    <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="m21 21-4.35-4.35"></path>
                    </svg>
                    <input type="text" class="search-input" placeholder="Search...">
                </div>
                <div class="nav-switcher" id="nav-switcher"><button class="nav-switch active" data-section="docs">Docs</button><button class="nav-switch" data-section="guides">Guides</button></div>
            </div>
            <nav class="sidebar-nav" id="docs-nav"><div class="nav-section" data-section="docs"><div class="nav-category">core</div><a class="nav-item" href="core_perky_module.html" data-file="/core/perky_module.doc.js" data-title="perkymodule" data-category="core">PerkyModule</a><a class="nav-item" href="core_utils.html" data-file="/core/utils.doc.js" data-title="utils" data-category="core">Utils</a><a class="nav-item" href="core_action_controller.html" data-file="/core/action_controller.doc.js" data-title="actioncontroller" data-category="core">ActionController</a><a class="nav-item" href="core_action_dispatcher.html" data-file="/core/action_dispatcher.doc.js" data-title="actiondispatcher" data-category="core">ActionDispatcher</a><a class="nav-item" href="core_inflector.html" data-file="/core/inflector.doc.js" data-title="inflector" data-category="core">Inflector</a><a class="nav-item" href="core_logger.html" data-file="/core/logger.doc.js" data-title="logger" data-category="core">Logger</a><a class="nav-item" href="core_notifier.html" data-file="/core/notifier.doc.js" data-title="notifier" data-category="core">Notifier</a><a class="nav-item" href="core_observable_map.html" data-file="/core/observable_map.doc.js" data-title="observablemap" data-category="core">ObservableMap</a><a class="nav-item" href="core_observable_set.html" data-file="/core/observable_set.doc.js" data-title="observableset" data-category="core">ObservableSet</a><a class="nav-item" href="core_perky_query.html" data-file="/core/perky_query.doc.js" data-title="perkyquery" data-category="core">PerkyQuery</a><a class="nav-item" href="core_registry.html" data-file="/core/registry.doc.js" data-title="registry" data-category="core">Registry</a><div class="nav-category">application</div><a class="nav-item" href="application_application.html" data-file="/application/application.doc.js" data-title="application" data-category="application">Application</a><a class="nav-item" href="application_asset.html" data-file="/application/asset.doc.js" data-title="asset" data-category="application">Asset</a><a class="nav-item" href="application_manifest.html" data-file="/application/manifest.doc.js" data-title="manifest" data-category="application">Manifest</a><a class="nav-item" href="application_perky_view.html" data-file="/application/perky_view.doc.js" data-title="perkyview" data-category="application">PerkyView</a><a class="nav-item" href="application_source_manager.html" data-file="/application/source_manager.doc.js" data-title="sourcemanager" data-category="application">SourceManager</a><div class="nav-category">game</div><a class="nav-item" href="game_game.html" data-file="/game/game.doc.js" data-title="game" data-category="game">Game</a><a class="nav-item" href="game_game_loop.html" data-file="/game/game_loop.doc.js" data-title="gameloop" data-category="game">GameLoop</a><a class="nav-item" href="game_world_view.html" data-file="/game/world_view.doc.js" data-title="worldview" data-category="game">WorldView</a><div class="nav-category">math</div><a class="nav-item" href="math_random.html" data-file="/math/random.doc.js" data-title="random" data-category="math">Random</a><a class="nav-item" href="math_vec2.html" data-file="/math/vec2.doc.js" data-title="vec2" data-category="math">Vec2</a><div class="nav-category">render</div><a class="nav-item" href="render_canvas_renderer.html" data-file="/render/canvas_renderer.doc.js" data-title="canvasrenderer" data-category="render">CanvasRenderer</a><a class="nav-item" href="render_webgl_renderer.html" data-file="/render/webgl_renderer.doc.js" data-title="webglrenderer" data-category="render">WebGLRenderer</a><a class="nav-item" href="render_circle.html" data-file="/render/circle.doc.js" data-title="circle" data-category="render">Circle</a><a class="nav-item" href="render_group_2d.html" data-file="/render/group_2d.doc.js" data-title="group2d" data-category="render">Group2D</a><a class="nav-item" href="render_image_2d.html" data-file="/render/image_2d.doc.js" data-title="image2d" data-category="render">Image2D</a><a class="nav-item" href="render_object_2d.html" data-file="/render/object_2d.doc.js" data-title="object2d" data-category="render">Object2D</a><a class="nav-item" href="render_rectangle.html" data-file="/render/rectangle.doc.js" data-title="rectangle" data-category="render">Rectangle</a><a class="nav-item" href="render_sprite.html" data-file="/render/sprite.doc.js" data-title="sprite" data-category="render">Sprite</a><a class="nav-item" href="render_transform.html" data-file="/render/transform.doc.js" data-title="transform" data-category="render">Transform</a><div class="nav-category">input</div><a class="nav-item active" href="input_input_system.html" data-file="/input/input_system.doc.js" data-title="inputsystem" data-category="input">InputSystem</a><a class="nav-item" href="input_input_control.html" data-file="/input/input_control.doc.js" data-title="inputcontrol" data-category="input">InputControl</a><div class="nav-category">input/input_controls</div><a class="nav-item" href="input_input_controls_button_control.html" data-file="/input/input_controls/button_control.doc.js" data-title="buttoncontrol" data-category="input/input_controls">ButtonControl</a><a class="nav-item" href="input_input_controls_vec2_control.html" data-file="/input/input_controls/vec2_control.doc.js" data-title="vec2control" data-category="input/input_controls">Vec2Control</a><div class="nav-category">input/input_devices</div><a class="nav-item" href="input_input_devices_keyboard_device.html" data-file="/input/input_devices/keyboard_device.doc.js" data-title="keyboarddevice" data-category="input/input_devices">KeyboardDevice</a><a class="nav-item" href="input_input_devices_mouse_device.html" data-file="/input/input_devices/mouse_device.doc.js" data-title="mousedevice" data-category="input/input_devices">MouseDevice</a><a class="nav-item" href="input_input_devices_touch_device.html" data-file="/input/input_devices/touch_device.doc.js" data-title="touchdevice" data-category="input/input_devices">TouchDevice</a><div class="nav-category">audio</div><a class="nav-item" href="audio_audio_system.html" data-file="/audio/audio_system.doc.js" data-title="audiosystem" data-category="audio">AudioSystem</a><div class="nav-category">editor</div><a class="nav-item" href="editor_perky_explorer.html" data-file="/editor/perky_explorer.doc.js" data-title="perkyexplorer" data-category="editor">PerkyExplorer</a><a class="nav-item" href="editor_perky_logger.html" data-file="/editor/perky_logger.doc.js" data-title="perkylogger" data-category="editor">PerkyLogger</a><a class="nav-item" href="editor_toggle_input.html" data-file="/editor/toggle_input.doc.js" data-title="toggleinput" data-category="editor">ToggleInput</a><a class="nav-item" href="editor_vec2_input.html" data-file="/editor/vec2_input.doc.js" data-title="vec2input" data-category="editor">Vec2Input</a><div class="nav-category">editor/inspectors</div><a class="nav-item" href="editor_inspectors_action_controller_inspector.html" data-file="/editor/inspectors/action_controller_inspector.doc.js" data-title="actioncontrollerinspector" data-category="editor/inspectors">ActionControllerInspector</a><a class="nav-item" href="editor_inspectors_action_dispatcher_inspector.html" data-file="/editor/inspectors/action_dispatcher_inspector.doc.js" data-title="actiondispatcherinspector" data-category="editor/inspectors">ActionDispatcherInspector</a><div class="nav-category">editor/log_renderers</div><a class="nav-item" href="editor_log_renderers_vec2_log_renderer.html" data-file="/editor/log_renderers/vec2_log_renderer.doc.js" data-title="vec2logrenderer" data-category="editor/log_renderers">Vec2LogRenderer</a><div class="nav-category">doc</div><a class="nav-item" href="doc_runtime.html" data-file="/doc/runtime.doc.js" data-title="doc runtime" data-category="doc">Doc Runtime</a><a class="nav-item" href="doc_doc_page.html" data-file="/doc/doc_page.doc.js" data-title="doc page" data-category="doc">Doc Page</a></div><div class="nav-section" data-section="guides" style="display:none"><div class="nav-category">prologue</div><a class="nav-item" href="guide_foreword.html" data-file="/doc/guides/prologue/foreword.guide.js" data-title="foreword" data-category="prologue">Foreword</a><a class="nav-item" href="guide_philosophy.html" data-file="/doc/guides/prologue/philosophy.guide.js" data-title="philosophy" data-category="prologue">Philosophy</a><div class="nav-category">general</div><a class="nav-item" href="guide_conventions.html" data-file="/doc/guides/conventions.guide.js" data-title="conventions" data-category="general">Conventions</a><a class="nav-item" href="guide_perky_module.html" data-file="/doc/guides/perky_module.guide.js" data-title="perkymodule" data-category="general">Perky Module</a></div></nav>
        </aside>

        <main class="docs-main">
            <div class="docs-content" id="doc-container"></div>
            <div class="docs-logger">
                <perky-logger id="main-logger" max-entries="30"></perky-logger>
            </div>
        </main>
    </div>

    <script type="module" src="assets/main-CWnUgyy4.js"></script>
</body>
</html>